\x04\x01import display\nimport device\nimport uasyncio\nimport gc\nimport time\nimport touch\n\nbattlev = ""\nfirstaccess = True\nbattlevint = 100\napp = ["phone", "camera" , "next?", "oppo", "aaaa"]\nidx = 0\nalive = ""\ninapp = ""\ntime = "x"\n\ndef main_mia():\n  async def battery_level():\n    global battlevint\n    \n    if device.battery_level() < battlevint:\n      battlevint = device.battery_level()\n\n    battlev = str(battlevint) + '%'\n    display.text(battlev, 0,0,0xffffff)\n\n  def change_text(button):\n    global app\n    global idx\n    global alive\n    global lastapp\n    global nextapp\n\n    lastapp = alive\n    limit = len(app) - 1\n    \n    if button == "A":\n      idx = idx + 1\n      if idx > limit:\n        idx = 0\n    if button == "B":\n      idx = idx - 1\n      if idx < 0:\n        idx = limit\n    alive = app[idx]\n\n    draw_ui()\n    persistent()\n    print(alive)\n\n  def draw_ui():\n    \n    global idx\n    uasyncio.run(battery_level())\n\n    y = 250\n    xa = 50\n    xb = 250\n    xc = 450\n    sizea = 100\n    sizeb = 100\n    sizec = 100\n    colora = 0xffffff\n    colorb = 0xffffff\n    colorc = 0xffffff\n\n\n    if idx == 0:\n      colora = 0xf8db5E\n      xa = 25\n      sizea = 150 \n    if idx == 1:\n      colorb = 0xf8db5E\n      xb = 225\n      sizeb = 150\n    if idx > 1:\n      colorc = 0xf8db5E\n      xc = 425\n      sizec = 150\n\n    display.hline(xa, y, sizea, colora)\n\n    display.hline(xb, y, sizeb, colorb)\n\n    display.hline(xc, y, sizec, colorc)\n\n  def touch_listener(button):\n    change_text(button)\n    uasyncio.run(touch_listener_async(button))\n\n  async def touch_listener_async(button):\n    global inapp\n    pressed = touch.state(button)\n    uasyncio.sleep_ms(5000)\n    pressed = touch.state(button)\n\n    if pressed and button == "A":\n      inapp = lastapp\n      print("nav",inapp)\n\n      display.show();\n      display.text("LOADING : " + inapp,150,175,0xffffff)\n      display.show();\n\n    if pressed and button == "B":\n      inapp = ""\n      print("nav","back")\n\n\n\n  def persistent():\n    app1 = app[0]\n    app2 = app[1]\n    app3 = app[2]\n\n    colorapp = 0xffffff\n    \n    if idx > 2:\n      app1 = "< " + app[idx-2]\n      app2 = app[idx-1]\n      app3 = app[idx]\n\n    display.text(app1[:4],50,175,colorapp)\n    display.text(app2[:4],250,175,colorapp)\n    display.text(app3[:4] + " >",450,175,colorapp)\n    \n    battery_level()\n    display.show()\n    gc.collect()\n\n  touch.callback(touch.BOTH, touch_listener)\n\n  display.text("MONOCLE",250,175,0xffffff)\n  display.text("Press A to continue, B to go back",0,350,0xffffff)\n  display.show()\n\nmain_mia()